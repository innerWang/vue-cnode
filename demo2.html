<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>过滤器，指令、事件以及语法糖</title>
  <style>
    .transRed{
      color: red;
    }
  </style>
</head>
<body>
  <div id="dateApp">
  
    <!-- 过滤器，管道符后面接的是过滤器的名字 -->
    {{date | formatDate}}
    <hr>
    <!-- 使用v-text指令 以属性的形式引入变量的值-->
    <span>{{apple}}</span>  <br>
    <span v-text="apple"></span>
    <hr>
    <!-- 使用 v-html指令 解析html-->
    {{banana}} <br>
    <span v-text="banana"></span> <br>
    <span v-html="banana"></span>
    <hr>
    <!-- 使用 v-bind 绑定活的属性 以下前两种写法都拿不到transRed的类名-->
    <!-- <div class="{{className}}">aaa</div>
    <div class="className">aaa</div> -->
    <div v-bind:class="className">aaa</div>
    <!--语法糖 'v-bind:' 可以写为 ':'   -->
    <div :class="className">aaa</div>
    <hr>

    <!-- 使用 v-on 绑定事件监听器 -->
    count:{{countNum}}   
    <button v-on:click="add">使用v-on绑定add事件的按钮</button>
    <!-- 语法糖： 在不影响功能的情况下，使用更加简洁的方法实现同样的效果，方便程序开发 -->
    <button @click="add">使用语法糖绑定事件的按钮</button>
    


  </div>
  <script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
  <script>
    /* 需求: 在页面中实时显示时间*/

    var addZero = function(value){
      return value < 10 ? '0'+value : value
    }

    var app = new Vue({
      el:"#dateApp",
      data:{
        date: new Date(),
        apple: '苹果',
        banana: '<span style="color:blue;">香蕉</span>',
        className:'transRed',
        countNum:0

      },
      methods:{
        add:function(){
          /*Vue实例的属性通过 '实例名.$属性名'获取，
            Vue实例的data属性中的属性通过 '实例名.data中的属性名' 获取
            this指向Vue实例的对象
          */
          this.countNum += 1;
        }
      },
      // 定义过滤器， 可能有很多个
      filters:{
        formatDate: function(value){
          // 将字符串转换为 日期类型
          var date = new Date(value);
          var year = date.getFullYear();
          var month = addZero(date.getMonth()+1);
          var day = addZero(date.getDate());
          var hour = addZero(date.getHours());
          var min = addZero(date.getMinutes());
          var sec = addZero(date.getSeconds());

          //将整理好的数据返回
          return `${year}年${month}月${day}日${hour}时${min}分${sec}秒`


        }
      },
      mounted:function(){
        var _this = this; // this 代表的是 vue实例
        this.timer = setInterval(function(){
          _this.date = new Date()
        },1000)
      },
      beforeDestoryed:function(){
        //清除定时器
        if(this.timer){
          clearInterval(this.timer)
        }
      }
    })
  </script>
</body>
</html>