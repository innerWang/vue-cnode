<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>vue的计算属性 </title>
</head>
<body>
  <div id="app">
    {{text}} <br>
    {{text.split(',').reverse().join(',')}}<br>
    <!-- 逻辑过长机会变得臃肿，难以维护，当遇到复杂的逻辑时需要使用计算属性 -->
    ----下面是使用计算属性得到的结果 <br>
    {{reverseText}}
    <hr>
    ---- 计算两个购物车的总价 <br>
    {{prices}}

    <hr>
    <!-- 计算属性的get 和 set -->
    -----计算属性的 get 和 set <br>
    {{fullName}}

    <hr>
    <!-- 计算属性的缓存 -->
    <!-- 如果是调用方法，只要页面重新渲染，方法就会重新执行,不需要渲染时，则不会重新执行；
      对于计算属性而言，由于其缓存特性，只有依赖的数据发生改变时，其数据才会变化,就算页面重新渲染，其依赖的数据没有发生变化，就不会更新。
      使用方法还是计算属性，取决于是否需要缓存，当遍历大数组和做大量计算时，应使用计算属性；
      如改变cart1中的count，计算属性的时间戳没变(是因为计算属性依赖的数据没有改变)，但通过method方法拿到的时间戳更新了-->
    ----- 计算属性的缓存 <br>
    {{now}} 
    <br>
    ------ 通过method方法拿到时间(需要注意方法一定要加括号) <br>
    {{thisTime()}}


  </div>
  <div id="app1"></div>

  <script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
  <script>

    var app1 = new Vue({
      el:'#app1',
      data:{
        msg: '我是Vue实例app1里面的内容' 
      }
    })
    //需求： 将text变为 789,456,123
    var app = new Vue({
      el: "#app",  
      data: {
        msg:'测试计算属性和method方法用的msg，不渲染到页面，修改此msg，两个时间戳永远不会变',
        text:'123,456,789',
        firstName:'sanfeng',
        lastName:'Zhang',
        cart1:[
          {
            name:'iPhoneX',
            price:'6999',
            count:1
          }
        ],
        cart2:[
          {
            name:'iPhoneXR',
            price:'5499',
            count:1
          },
          { 
            name:'iPad',
            price:'2499',
            count:1
          }
        ]
      },
      methods:{
        thisTime: function(){
          return Date.now()
        }
      },
      //在computed中定义计算属性，计算属性也是属性，可以直接渲染到页面
      computed:{
        now:function(){
          return Date.now();
        },
        reverseText: function(){
          return this.text.split(',').reverse().join(',')
        },
        prices:function(){
          var totalPrice = 0;
          for(var i=0;i<this.cart1.length;i++){
            totalPrice += this.cart1[i].price * this.cart1[i].count
          }
          for(var j=0;j<this.cart2.length;j++){
            totalPrice += this.cart2[j].price * this.cart2[j].count
          }
          return totalPrice + '-->--拼接另一个Vue实例的数据-->--'+app1.msg
        },
        /* 计算属性的默认用法是getter方法 */
        // fullName: function(){
        //   return this.firstName + ' '+ this.lastName
        // }
        /* 对于get和set，如果不写，默认对应get，如果想使用set，则必须写set*/
        fullName:{
          get: function(){
            console.log('调用get方法')
            return this.firstName + ' '+ this.lastName
          },
          set: function(newValue){
            console.log('调用set方法')
            this.firstName = newValue
          }
        }

      }

    });

   
  </script>
</body>
</html>










